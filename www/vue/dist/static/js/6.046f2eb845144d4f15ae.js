webpackJsonp([6],{Uk75:function(t,e){},YCNw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),l={data:function(){return{config:{state:0,title:"",number:0},titleList:[{title:"特等奖",number:1},{title:"一等奖",number:10},{title:"二等奖",number:20},{title:"三等奖",number:50}]}},methods:{onSubmit:function(){if(this.config.number>this.config.totalPersonInit.length)alert("该奖项人数已经超过未中奖人数！");else{var t=JSON.parse(o()(this.config));this.$socket.emit("lotteryGoSubmit",t)}},onStart:function(){this.$socket.emit("lotteryGoStart","go")},onStop:function(){this.$socket.emit("lotteryGoStop","stop")},handleRemoveClick:function(t){var e=this;this.$confirm("确定删除ID为"+t+"的奖项吗？").then(function(n){e.$socket.emit("lotteryGoRemove",t)}).catch(function(t){})},handTitleChange:function(){var t=this;this.titleList.forEach(function(e){t.config.title===e.title&&(t.config.number=e.number)})},syncView:function(){this.$socket.emit("lotteryGoSync")},reloadLottery:function(){this.$socket.emit("reloadGoLottery")}},mounted:function(){this.$socket.emit("connect")},sockets:{connect:function(t){var e=this;this.$socket.emit("lotteryInit",{url:"lotteryAdmin"},function(t){e.config=t})},lotterySubmit:function(t){this.config=t},lotteryStart:function(t){this.config=t},lotteryStop:function(t){this.config=t},lotteryRemove:function(t){this.config=t},reloadLottery:function(t){this.config=t}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lotteryAdmin"},[n("el-card",{staticClass:"box-card"},[n("el-alert",{staticStyle:{margin:"20px 0"},attrs:{type:"warning",closable:!1}},[0===t.config.state?n("span",{attrs:{slot:"title"},slot:"title"},[t._v("请输入奖项名称以及人数")]):t._e(),t._v(" "),1===t.config.state?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("当前抽奖奖项: "+t.config.title+"; 抽奖人数: "+t.config.number+"; 开始抽奖请点击抽奖按钮；如需更改请直接下方输入并点击确定即可。"))]):t._e(),t._v(" "),2===t.config.state?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("抽奖中，当前抽奖奖项: "+t.config.title+"; 抽奖人数: "+t.config.number+"; 点击停止按钮即可确定本次抽奖人员。"))]):t._e(),t._v(" "),3===t.config.state?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("抽奖完成，当前抽奖奖项: "+t.config.title+"; 抽奖人数: "+t.config.number+"; 抽奖结果如下表。再次抽奖请直接下方输入并点击确定即可。"))]):t._e()]),t._v(" "),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.config}},[n("el-form-item",{attrs:{label:"奖项名称"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handTitleChange},model:{value:t.config.title,callback:function(e){t.$set(t.config,"title",e)},expression:"config.title"}},t._l(t.titleList,function(t,e){return n("el-option",{key:e,attrs:{label:t.title,value:t.title}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"人数"}},[n("el-input",{attrs:{placeholder:"例如：1"},model:{value:t.config.number,callback:function(e){t.$set(t.config,"number",t._n(e))},expression:"config.number"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:!t.config.number||!t.config.title||2===t.config.state},on:{click:t.onSubmit}},[t._v("确定")])],1)],1),t._v(" "),n("div",{staticStyle:{"margin-bottom":"50px"}},[n("el-button",{attrs:{type:"success",disabled:1!==t.config.state},on:{click:t.onStart}},[t._v("开始抽奖")]),t._v(" "),n("el-button",{attrs:{type:"danger",disabled:2!==t.config.state},on:{click:t.onStop}},[t._v("停止抽奖")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.config.data,stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"奖项名称",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"number",label:"人数",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"result",label:"人员"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.result,function(e,i){return n("el-tag",{key:i,staticStyle:{margin:"0px 10px 0px 0"},attrs:{type:e.indexOf("红")>-1?"danger":""}},[t._v(t._s(e))])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleRemoveClick(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("el-card",{staticStyle:{"margin-top":"30px"}},[n("el-alert",{attrs:{title:"下方按钮请慎重操作！",type:"error"}}),t._v(" "),n("div",[n("ul",[n("li",[t._v("强制同步：强制同步展示页面状态。例如：由于网络原因，点击开始抽奖或者停止抽奖时，展示页面没有开始动画或者停止动画，可以点此按钮。 ")]),t._v(" "),n("li",[t._v("重置：重置掉目前所有抽奖结果 ")])])]),t._v(" "),n("div",[n("el-button",{on:{click:t.syncView}},[t._v("强制同步")]),t._v(" "),n("el-button",{on:{click:t.reloadLottery}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(l,c,!1,function(t){n("Uk75")},"data-v-09eea703",null);e.default=r.exports}});
//# sourceMappingURL=6.046f2eb845144d4f15ae.js.map